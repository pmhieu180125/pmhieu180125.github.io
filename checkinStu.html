<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theo D√µi Chu·ªói H·ªçc T·∫≠p</title>
    
    <!-- D√íNG M√É M·ªöI ƒê·ªÇ TH√äM ICON CHO M√ÄN H√åNH CH√çNH -->
    <!-- H√£y thay th·∫ø ƒë∆∞·ªùng link href d∆∞·ªõi ƒë√¢y b·∫±ng ƒë∆∞·ªùng link ƒë·∫øn icon c·ªßa B·∫†N -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://github.com/pmhieu180125/pmhieu180125.github.io/blob/main/icons8-coder-in-hoodie-48.png">
    
    <!-- T√≠ch h·ª£p Tailwind CSS ƒë·ªÉ l√†m giao di·ªán ƒë·∫πp h∆°n -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- T√≠ch h·ª£p Google Fonts ƒë·ªÉ c√≥ font ch·ªØ ƒë·∫πp -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- T√≠ch h·ª£p th∆∞ vi·ªán icon Lucide -->
    <script src="https://unpkg.com/lucide-react@0.323.0/dist/umd/lucide.min.js"></script>
    <style>
        /* S·ª≠ d·ª•ng font Be Vietnam Pro cho to√†n b·ªô trang */
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
            background-color: #f0f2f5; /* M·ªôt m√†u n·ªÅn nh·∫π nh√†ng */
        }
        /* Hi·ªáu ·ª©ng gradient cho n·ªÅn */
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        /* Hi·ªáu ·ª©ng cho n√∫t khi di chu·ªôt qua */
        .btn-hover-effect {
            transition: all 0.3s ease;
        }
        .btn-hover-effect:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        /* T·∫°o ki·ªÉu cho ng√†y trong l·ªãch */
        .calendar-day.today {
            background-color: #a78bfa; /* M√†u t√≠m nh·∫°t cho ng√†y h√¥m nay */
            color: white;
            border-radius: 50%;
        }
        .calendar-day.streaked {
            background-color: #34d399; /* M√†u xanh l√° cho ng√†y ƒë√£ check-in */
            color: white;
            border-radius: 50%;
            position: relative;
        }
        /* Th√™m bi·ªÉu t∆∞·ª£ng ng·ªçn l·ª≠a cho ng√†y ƒë√£ check-in */
        .calendar-day.streaked::after {
            content: 'üî•';
            position: absolute;
            top: -8px;
            right: -5px;
            font-size: 0.7rem;
        }
        .input-goal:focus {
            outline: none;
            border-color: #a78bfa;
            box-shadow: 0 0 0 2px rgba(167, 139, 250, 0.2);
        }
    </style>
</head>
<body class="antialiased text-gray-800">

    <div id="app" class="min-h-screen flex flex-col items-center justify-center p-4">

        <div class="w-full max-w-md mx-auto bg-white rounded-2xl shadow-xl p-6 md:p-8 space-y-6">
            
            <!-- Ph·∫ßn ti√™u ƒë·ªÅ v√† m·ª•c ti√™u -->
            <header class="text-center">
                <div class="flex items-center justify-center gap-2">
                    <i data-lucide="flame" class="text-orange-500"></i>
                    <h1 class="text-2xl md:text-3xl font-bold text-gray-900">Chu·ªói H·ªçc T·∫≠p</h1>
                </div>
                <p class="text-gray-500 mt-1">Duy tr√¨ ƒë·ªông l·ª±c m·ªói ng√†y!</p>
                <input 
                    type="text" 
                    id="learning-goal" 
                    placeholder="M·ª•c ti√™u c·ªßa b·∫°n l√† g√¨? (v√≠ d·ª•: H·ªçc L·∫≠p tr√¨nh 30 ng√†y)"
                    class="w-full mt-4 p-3 text-center border-2 border-gray-200 rounded-lg transition duration-300 input-goal"
                >
            </header>

            <!-- Ph·∫ßn hi·ªÉn th·ªã chu·ªói -->
            <div class="grid grid-cols-2 gap-4 text-center">
                <div class="bg-violet-100 p-4 rounded-lg">
                    <p class="text-sm text-violet-700 font-medium">CHU·ªñI HI·ªÜN T·∫†I</p>
                    <p id="current-streak" class="text-4xl font-bold text-violet-900">0</p>
                    <p class="text-xs text-violet-600">ng√†y</p>
                </div>
                <div class="bg-emerald-100 p-4 rounded-lg">
                    <p class="text-sm text-emerald-700 font-medium">CHU·ªñI D√ÄI NH·∫§T</p>
                    <p id="longest-streak" class="text-4xl font-bold text-emerald-900">0</p>
                    <p class="text-xs text-emerald-600">ng√†y</p>
                </div>
            </div>

            <!-- L·ªãch -->
            <div id="calendar-container">
                <div class="flex items-center justify-between mb-2">
                    <button id="prev-month" class="p-2 rounded-full hover:bg-gray-100"><i data-lucide="chevron-left"></i></button>
                    <h2 id="month-year" class="font-bold text-lg"></h2>
                    <button id="next-month" class="p-2 rounded-full hover:bg-gray-100"><i data-lucide="chevron-right"></i></button>
                </div>
                <div id="calendar-grid" class="grid grid-cols-7 gap-1 text-center text-sm">
                    <!-- T√™n c√°c ng√†y trong tu·∫ßn s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
                </div>
            </div>

            <!-- N√∫t Check-in -->
            <button id="checkin-btn" class="w-full gradient-bg text-white font-bold py-3 px-4 rounded-lg flex items-center justify-center gap-2 btn-hover-effect disabled:opacity-50 disabled:cursor-not-allowed">
                <i data-lucide="check-circle-2"></i>
                <span id="checkin-text">Check-in H√¥m Nay</span>
            </button>
            
            <!-- Tr√≠ch d·∫´n t·∫°o ƒë·ªông l·ª±c -->
            <div id="quote-container" class="text-center pt-4 border-t border-gray-200">
                <p class="text-sm italic text-gray-500">"H√†nh tr√¨nh v·∫°n d·∫∑m b·∫Øt ƒë·∫ßu b·∫±ng m·ªôt b∆∞·ªõc ch√¢n."</p>
            </div>
        </div>

        <footer class="text-center mt-8 text-gray-500 text-sm">
            <p>T·∫°o b·ªüi Gemini v·ªõi ‚ù§Ô∏è</p>
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- C√ÅC BI·∫æN V√Ä TR·∫†NG TH√ÅI ---
            const appState = {
                goal: 'H·ªçc t·∫≠p m·ªói ng√†y',
                streakedDates: [], // L∆∞u c√°c ng√†y ƒë√£ check-in d∆∞·ªõi d·∫°ng 'YYYY-MM-DD'
                currentStreak: 0,
                longestStreak: 0,
                currentCalendarDate: new Date(),
            };

            const quotes = [
                "C√°ch t·ªët nh·∫•t ƒë·ªÉ d·ª± ƒëo√°n t∆∞∆°ng lai l√† t·∫°o ra n√≥.",
                "ƒê·ª´ng ƒë·ª£i c∆° h·ªôi, h√£y t·∫°o ra n√≥.",
                "Th·∫•t b·∫°i l√† m·∫π c·ªßa th√†nh c√¥ng.",
                "H·ªçc, h·ªçc n·ªØa, h·ªçc m√£i.",
                "K·ª∑ lu·∫≠t l√† c·∫ßu n·ªëi gi·ªØa m·ª•c ti√™u v√† th√†nh t·ª±u.",
                "Ng∆∞·ªùi duy nh·∫•t b·∫°n n√™n c·ªë g·∫Øng tr·ªü n√™n t·ªët h∆°n l√† ch√≠nh b·∫°n c·ªßa ng√†y h√¥m qua.",
                "H√£y b·∫Øt ƒë·∫ßu t·ª´ n∆°i b·∫°n ƒë·ª©ng. S·ª≠ d·ª•ng nh·ªØng g√¨ b·∫°n c√≥. L√†m nh·ªØng g√¨ b·∫°n c√≥ th·ªÉ.",
            ];

            // --- L·∫§Y C√ÅC PH·∫¶N T·ª¨ DOM ---
            const goalInput = document.getElementById('learning-goal');
            const currentStreakEl = document.getElementById('current-streak');
            const longestStreakEl = document.getElementById('longest-streak');
            const checkinBtn = document.getElementById('checkin-btn');
            const checkinText = document.getElementById('checkin-text');
            const calendarGrid = document.getElementById('calendar-grid');
            const monthYearEl = document.getElementById('month-year');
            const prevMonthBtn = document.getElementById('prev-month');
            const nextMonthBtn = document.getElementById('next-month');
            const quoteContainer = document.getElementById('quote-container');

            // --- H√ÄM X·ª¨ L√ù D·ªÆ LI·ªÜU ---

            // L·∫•y ng√†y h√¥m nay d∆∞·ªõi ƒë·ªãnh d·∫°ng 'YYYY-MM-DD'
            const getTodayString = () => {
                const today = new Date();
                return today.toISOString().split('T')[0];
            };

            // L∆∞u tr·∫°ng th√°i v√†o Local Storage
            const saveData = () => {
                const dataToSave = {
                    goal: appState.goal,
                    streakedDates: appState.streakedDates
                };
                localStorage.setItem('learningStreakApp', JSON.stringify(dataToSave));
            };
            
            // T·∫£i d·ªØ li·ªáu t·ª´ Local Storage
            const loadData = () => {
                const savedData = localStorage.getItem('learningStreakApp');
                if (savedData) {
                    const parsedData = JSON.parse(savedData);
                    appState.goal = parsedData.goal || 'H·ªçc t·∫≠p m·ªói ng√†y';
                    appState.streakedDates = parsedData.streakedDates || [];
                }
            };
            
            // T√≠nh to√°n chu·ªói hi·ªán t·∫°i v√† chu·ªói d√†i nh·∫•t
            const calculateStreaks = () => {
                if (appState.streakedDates.length === 0) {
                    appState.currentStreak = 0;
                    appState.longestStreak = 0;
                    return;
                }

                const sortedDates = [...new Set(appState.streakedDates)].sort();
                let current = 0;
                let longest = 0;
                let tempStreak = 0;
                
                // T√≠nh chu·ªói d√†i nh·∫•t
                for (let i = 0; i < sortedDates.length; i++) {
                    if (i === 0) {
                        tempStreak = 1;
                    } else {
                        const prevDate = new Date(sortedDates[i-1]);
                        const currentDate = new Date(sortedDates[i]);
                        const diffTime = currentDate - prevDate;
                        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                        
                        if (diffDays === 1) {
                            tempStreak++;
                        } else {
                            tempStreak = 1;
                        }
                    }
                    if (tempStreak > longest) {
                        longest = tempStreak;
                    }
                }
                appState.longestStreak = longest;
                
                // T√≠nh chu·ªói hi·ªán t·∫°i
                const today = new Date(getTodayString());
                const yesterday = new Date(today);
                yesterday.setDate(today.getDate() - 1);

                const hasCheckedInToday = sortedDates.includes(getTodayString());
                const hasCheckedInYesterday = sortedDates.includes(yesterday.toISOString().split('T')[0]);

                if (!hasCheckedInToday && !hasCheckedInYesterday) {
                    appState.currentStreak = 0;
                } else {
                     current = 0;
                     // T√≠nh ng∆∞·ª£c t·ª´ ng√†y h√¥m nay (ho·∫∑c h√¥m qua n·∫øu h√¥m nay ch∆∞a check-in)
                     let lastDateStr = hasCheckedInToday ? getTodayString() : yesterday.toISOString().split('T')[0];
                     
                     if (sortedDates.includes(lastDateStr)) {
                        current = 1;
                        for (let i = sortedDates.indexOf(lastDateStr) - 1; i >= 0; i--) {
                            const prevDate = new Date(sortedDates[i]);
                            const currentDate = new Date(sortedDates[i+1]);
                            const diffTime = currentDate - prevDate;
                            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

                            if (diffDays === 1) {
                                current++;
                            } else {
                                break;
                            }
                        }
                     }
                }
                appState.currentStreak = current;
            };

            // --- H√ÄM C·∫¨P NH·∫¨T GIAO DI·ªÜN ---

            // C·∫≠p nh·∫≠t giao di·ªán ch√≠nh
            const renderUI = () => {
                calculateStreaks();

                goalInput.value = appState.goal;
                currentStreakEl.textContent = appState.currentStreak;
                longestStreakEl.textContent = appState.longestStreak;
                
                const hasCheckedInToday = appState.streakedDates.includes(getTodayString());
                if(hasCheckedInToday){
                    checkinBtn.disabled = true;
                    checkinText.textContent = 'ƒê√£ Check-in H√¥m Nay!';
                } else {
                    checkinBtn.disabled = false;
                    checkinText.textContent = 'Check-in H√¥m Nay';
                }

                renderCalendar();
            };
            
            // V·∫Ω l·ªãch
            const renderCalendar = () => {
                calendarGrid.innerHTML = '';
                const date = appState.currentCalendarDate;
                const year = date.getFullYear();
                const month = date.getMonth();

                monthYearEl.textContent = `Th√°ng ${month + 1}, ${year}`;

                const firstDayOfMonth = new Date(year, month, 1).getDay(); // 0 = Sunday, 1 = Monday...
                const daysInMonth = new Date(year, month + 1, 0).getDate();

                // Th√™m c√°c ng√†y trong tu·∫ßn
                const weekdays = ['CN', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7'];
                weekdays.forEach(day => {
                    const dayEl = document.createElement('div');
                    dayEl.textContent = day;
                    dayEl.className = 'font-bold text-gray-500';
                    calendarGrid.appendChild(dayEl);
                });

                // Th√™m c√°c √¥ tr·ªëng cho ng√†y ƒë·∫ßu th√°ng
                const firstDayIndex = firstDayOfMonth === 0 ? 6 : firstDayOfMonth -1; // Chuy·ªÉn Ch·ªß nh·∫≠t ra cu·ªëi
                for (let i = 0; i < firstDayIndex; i++) {
                    calendarGrid.appendChild(document.createElement('div'));
                }

                // Th√™m c√°c ng√†y trong th√°ng
                const todayString = getTodayString();
                for (let day = 1; day <= daysInMonth; day++) {
                    const dayEl = document.createElement('div');
                    dayEl.textContent = day;
                    dayEl.className = 'p-2 calendar-day flex items-center justify-center h-8 w-8';
                    const dateString = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                    
                    if (dateString === todayString) {
                        dayEl.classList.add('today');
                    }
                    if (appState.streakedDates.includes(dateString)) {
                        dayEl.classList.add('streaked');
                    }
                    calendarGrid.appendChild(dayEl);
                }
            };
            
            // Hi·ªÉn th·ªã m·ªôt c√¢u tr√≠ch d·∫´n ng·∫´u nhi√™n
            const showRandomQuote = () => {
                const randomIndex = Math.floor(Math.random() * quotes.length);
                quoteContainer.querySelector('p').textContent = `"${quotes[randomIndex]}"`;
            };

            // --- H√ÄM X·ª¨ L√ù S·ª∞ KI·ªÜN ---

            const handleCheckIn = () => {
                const todayStr = getTodayString();
                if (!appState.streakedDates.includes(todayStr)) {
                    appState.streakedDates.push(todayStr);
                    saveData();
                    renderUI();
                }
            };

            const handleGoalChange = (event) => {
                appState.goal = event.target.value;
                saveData();
            };

            // --- KH·ªûI T·∫†O ·ª®NG D·ª§NG ---
            const init = () => {
                loadData();
                renderUI();
                showRandomQuote();

                // Th√™m c√°c s·ª± ki·ªán
                checkinBtn.addEventListener('click', handleCheckIn);
                goalInput.addEventListener('change', handleGoalChange);
                prevMonthBtn.addEventListener('click', () => {
                    appState.currentCalendarDate.setMonth(appState.currentCalendarDate.getMonth() - 1);
                    renderCalendar();
                });
                nextMonthBtn.addEventListener('click', () => {
                    appState.currentCalendarDate.setMonth(appState.currentCalendarDate.getMonth() + 1);
                    renderCalendar();
                });
                
                // K√≠ch ho·∫°t th∆∞ vi·ªán icon
                lucide.createIcons();
            };

            init();
        });
    </script>
</body>
</html>

